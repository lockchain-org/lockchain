# LockChain unified configuration template.
#
# Copy to /etc/lockchain.toml and adjust:
#   - provider.type
#   - policy.targets
#   - usb.device_label and/or usb.device_uuid
#   - usb.expected_sha256 after provisioning

[provider]
# zfs | luks (auto is supported but explicit is recommended for systemd-managed hosts)
type = "zfs"

[policy]
# Managed targets: datasets for ZFS, crypt mappings for LUKS.
targets = ["rpool/ROOT/ubuntu"]
allow_root = false

[zfs]
zfs_path = "/usr/sbin/zfs"
zpool_path = "/usr/sbin/zpool"

[luks]
# cryptsetup_path = "/usr/sbin/cryptsetup"
# crypttab_path = "/etc/crypttab"

[crypto]
timeout_secs = 10

[usb]
key_hex_path = "/run/lockchain/key.raw"
expected_sha256 = ""
device_label = "LOCKCHAIN"
# device_uuid = "0000-0000"
device_key_path = "key.raw"
mount_timeout_secs = 10

[fallback]
enabled = true
askpass = true
askpass_path = "/usr/bin/systemd-ask-password"
passphrase_salt = ""
passphrase_xor = ""
passphrase_iters = 250000

[retry]
max_attempts = 3
base_delay_ms = 500
max_delay_ms = 5000
jitter_ratio = 0.1
